'use strict';function _typeof(t){return(_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t})(t)}var _GenerateSumConstant;function _classPrivateMethodInitSpec(t,e){_checkPrivateRedeclaration(t,e),e.add(t)}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError('Cannot initialize the same private elements twice on an object')}function _assertClassBrand(t,e,n){if('function'==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError('Private element is not present on this object')}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function _unsupportedIterableToArray(t,e){var n;if(t)return'string'==typeof t?_arrayLikeToArray(t,e):'Map'===(n='Object'===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||'Set'===n?Array.from(t):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ownKeys(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError('Cannot call a class as a function')}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,'value'in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,'prototype',{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,'string');return'symbol'==_typeof(t)?t:t+''}function _toPrimitive(t,e){if('object'!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return('string'===e?String:Number)(t);n=n.call(t,e||'default');if('object'!=_typeof(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&('object'===_typeof(e)||'function'==typeof e))return e;if(void 0!==e)throw new TypeError('Derived constructors may only return object or undefined');return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _get(){return(_get='undefined'!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=_superPropBase(t,e);if(i)return(i=Object.getOwnPropertyDescriptor(i,e)).get?i.get.call(arguments.length<3?t:n):i.value}).apply(this,arguments)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if('function'!=typeof e&&null!==e)throw new TypeError('Super expression must either be null or a function');t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,'prototype',{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SumConstantArtifact=function(){function e(t){return _classCallCheck(this,e),(t=_callSuper(this,e,[t])).id=null,t.points=[],t.curves=[],t.curveCount=null,t.alphabet={cos:{point:{coord:[0,1],visible:!0},keyCurve:'cos(x)'},tan:{point:{coord:[0,1],visible:!0},keyCurve:'tan(x)',options:{},interval:[]},ln:{point:{coord:[0,1],visible:!0},keyCurve:'ln(x)',options:{},interval:[]},sin:{point:{coord:[0,0],visible:!0},keyCurve:'sin(x)',options:{},interval:[]},aSin:{point:{coord:[0,1],visible:!0},keyCurve:'asin(x)',options:{},interval:[]},aTan:{point:{coord:[0,1],visible:!0},keyCurve:'atan(x)',options:{},interval:[]},aCos:{point:{coord:[0,1],visible:!0},keyCurve:'acos(x)',options:{},interval:[]},abs:{point:{coord:[0,1],visible:!0},keyCurve:'abs(x)'},entera:{point:{coord:[0,1],visible:!0},keyCurve:'trunc(x)',options:{},interval:[]},identidad:{point:{coord:[0,1],visible:!0},keyCurve:'x',options:{},interval:[]},identidadNegativa:{point:{coord:[0,1],visible:!0},keyCurve:'-x',options:{},interval:[]},inversaNumerica:{point:{coord:[0,1],visible:!0},keyCurve:'x^(-1)',options:{},interval:[]},alCuadrado:{point:{coord:[0,1],visible:!0},keyCurve:'x^(2)',options:{},interval:[]},exp:{point:{coord:[0,1],visible:!0},keyCurve:'exp(x)',options:{},interval:[]},sqrt:{point:{coord:[0,1],visible:!0},keyCurve:'sqrt(x)',options:{},interval:[]},constante:{point:{coord:[0,1],visible:!0},keyCurve:'1',options:{},interval:[]}},t.status=!0,t.curveSelected=[],t}return _inherits(e,EngineMaker),_createClass(e,[{key:'initArtifact',value:function(){var t;_get(_getPrototypeOf(e.prototype),'initArtifact',this).call(this),this.curveCount=null!=(t=null==(t=this.definition)?void 0:t.curveCount)?t:2,this.alphabet=null!=(t=null==(t=this.boardDefinition)?void 0:t.alphabet)?t:this.alphabet,this.curveButton=null==(t=null==(t=this.definition)?void 0:t.showCurveButton)||t?this.node.querySelector('.btnCurve'):null,this.curveButton?this.curveButton.style.display='block':(this.curveButton=this.node.querySelector('.btnCurve'),this.curveButton.style.display='none'),this.definition.other=[],this.definition.visibleAsyntote=!1,this.definition.visiblexSlice=!1,null!=(t=this.elementOfBoards)&&t.asymptotes&&this.generateDefaultAsymptotes(),null!=(t=this.definition)&&null!=(t=t.conditions)&&t.asymptotes&&this.generateDefinitionAsymptotes(),this.curvesMenu(),this.buttonsClick(),this.statement()}},{key:'functionsCurves',value:function(t){var e,n,i,o,r=this;if(t.keyCurve)return i=_objectSpread({coord:[0,0],visible:!0,altAssymtote:[20]},t.point),e=null!=(e=t.interval)?e:[],(n=gAllPointsDefault({def:this.definition,board:this.boardObject,points:[{x:null!=(n=i.coord[0])?n:0,y:null!=(n=i.coord[1])?n:0,fillcolor:'#f1604d',visible:i.visible,name:'P',label:{visible:!1}}]}))[0].on('drag',function(){r.status=!0}),i=t.keyCurve+'+(P.Y()-'+n[0].Y()+')',o=gAsymptotes({board:this.boardObject,asymptotes:[{x:n[0].X(),style:{visible:!1}}]}),n[0].makeGlider(o[0][1]),{name:t.keyCurve,curve:gExpressionCurve({board:this.boardObject,expression:i,interval:e,curveStyle:t.options}),point:n[0],asymptote:o};throw new Error('No se ha difinido la curva')}},{key:'statement',value:function(){var t,e=this.node.querySelector('.instructionText');this.definition.instructionText?((t=document.createElement('math-field')).classList.add('colorInputAlphabet'),t.value=this.definition.instructionText.text,t.setAttribute('readonly','readonly'),e.appendChild(t),this.definition.instructionText.styleClass&&(t=t.classList).add.apply(t,_toConsumableArray(this.definition.instructionText.styleClass))):e.style.display='none'}},{key:'curvesMenu',value:function(){var i=this,o=(this.node.addEventListener('click',function(t){(t.target.matches('.btnCurve')||t.target.matches('.close-btn'))&&r.classList.toggle('artifactCurve__menu--open')}),document.getElementById('tmp-ImagenMenu')),r=this.node.querySelector('.artifactCurve__menu');Object.keys(this.alphabet).forEach(function(e){var t=o.content.firstElementChild.cloneNode(!0),n=t.querySelector('.svgCurves');n.src='../../../assets/cap_4/'.concat(e,'.svg'),r.querySelector('.funtionContent').appendChild(t),t.addEventListener('click',function(t){i.curves.length<i.curveCount&&(i.curves.push(i.functionsCurves(i.alphabet[e])),i.curveSelected.push(i.alphabet[e].keyCurve),i.status=!0),r.classList.toggle('artifactCurve__menu--open')})})}},{key:'buttonsClick',value:function(){var e=this;this.node.addEventListener('click',function(t){t.target.matches('.xSlice')||t.target.matches('.close-btn')?(console.log('DEF',e.definition),e.definition.visiblexSlice=!e.definition.visiblexSlice,e.definition.asymptotes.forEach(function(t){t[1].setAttribute({visible:e.definition.visiblexSlice})}),e.definition.change=!0):(t.target.matches('.asyntote')||t.target.matches('.close-btn'))&&(e.definition.visibleAsyntote=!e.definition.visibleAsyntote,e.definition.change=!0),e.boardObject.update()})}},{key:'generateAsymptotePoint',value:function(t){var e=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=gAddPoint(this.definition,this.boardObject,null,t,[0,0]);return i.moveTo([0,0]),i.setAttribute({label:{anchorX:'middle',anchorY:'top',fontsize:24,offset:[5,35]},size:5,fixed:n,name:function(){return n?'0':''},visible:function(){return t.setAttribute({visible:function(){return n?e.definition.visibleAsyntote:e.definition.visiblexSlice}}),n?e.definition.visibleAsyntote:e.definition.visiblexSlice}}),i}},{key:'generateDefaultAsymptotes',value:function(){var t,n=this,e=this.elementOfBoards.asymptotes;console.log('Asyns default',e),e.forEach(function(t){var t=t[1],e=(n.definition.mode=4,n.generateAsymptotePoint(t));n.definition.mode=null,t.setAttribute({visible:!1}),e.on('drag',function(t){n.definition.change=!0})}),null!=(t=this.definition)&&t.asymptotes?this.definition.asymptotes.push(e):this.definition.asymptotes=e}},{key:'generateDefinitionAsymptotes',value:function(){var t,n=this,e=null==(e=this.definition)||null==(e=e.conditions)?void 0:e.asymptotes,e=gAsymptotes({board:this.boardObject,asymptotes:e});console.log('Validable Asyns',e),this.definition.points=e.map(function(t){var t=t[1],e=(n.definition.mode=4,n.generateAsymptotePoint(t,!1));return n.definition.mode=null,t.setAttribute({visible:!1}),e.on('drag',function(t){n.definition.change=!0}),e}),null!=(t=this.definition)&&t.asymptotes?(t=this.definition.asymptotes).push.apply(t,_toConsumableArray(e)):this.definition.asymptotes=e}},{key:'validation',value:function(){var t;_get(_getPrototypeOf(e.prototype),'validation',this).call(this),null==(t=this.definition.conditions)||!t.sumConstant||(t=null==(t=this.definition.conditions)?void 0:t.sumConstant).mathCurves.length>this.curves.length||(this.status||console.log(this.status),this.status=!1,this.validationCurves({defCurves:null==t?void 0:t.mathCurves,selectedCurves:this.curveSelected}),this.validationPoints({defPoints:null==t?void 0:t.mathCurves,selectedPoints:this.curves}))}},{key:'validationCurves',value:function(t){var e=t.defCurves,n=t.selectedCurves;if((null==n?void 0:n.length)===(null==e?void 0:e.length))return e.every(function(t){var e;return n.includes(null!=(e=t.curve)?e:t)})}},{key:'validationPoints',value:function(t){var e=t.defPoints,n=t.selectedPoints,i=_toConsumableArray(e);if(e.length!==n.length)return!1;for(var o=i.length-1;0<=o;o--)!function(){var e=i[o];-1!=n.findIndex(function(t){return gInterPoint(t.point.Y(),e.pointY,null==e?void 0:e.noise)&&t.name==e.curve})&&i.splice(o,1)}();return 0==i.length}},{key:'reset',value:function(){_get(_getPrototypeOf(e.prototype),'reset',this).call(this),console.log('reset()')}}])}(),_GenerateSumConstant_brand=new WeakSet,GenerateSumConstant=_createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'#engineSumConstant-tmp';if(_classCallCheck(this,t),_classPrivateMethodInitSpec(this,_GenerateSumConstant_brand),t.implement)return t.implement;this.allDefinitionArtifacts=e,this.allDefinitionBoard=n,this.tmp=null,this.selectorTmp=i,this.fragment=new DocumentFragment,_assertClassBrand(_GenerateSumConstant_brand,this,_main).call(this,this.allDefinitionArtifacts,this.allDefinitionBoard),this.countArtifact=0,this.countExample=0,t.implement=this});function _main(){if(!_GenerateSumConstant.mainCalled){this.tmp=_assertClassBrand(_GenerateSumConstant_brand,this,_getDOMTemplate).call(this,'engineSumConstant-tmp');var t,e=1,n=1;for(t in this.allDefinitionArtifacts){var i=this.tmp.content.firstElementChild.cloneNode(!0),o=document.querySelector('.artifactSumConstant[data-artifact=\''.concat(t,'\']'));o?(_assertClassBrand(_GenerateSumConstant_brand,this,_createArtifact).call(this,t,i,o,e,n),t.includes('example')?n++:e++):(console.warn('<!> este artefacto no es llamado en la vista'),t.includes('example')?n++:e++)}return document.body.appendChild(this.fragment),_GenerateSumConstant.mainCalled=!0,null}}function _getDOMTemplate(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return t?document.querySelector('#'.concat(t),'.'.concat(t))||(t=_assertClassBrand(_GenerateSumConstant_brand,this,_addTmpToDOM).call(this,t),_assertClassBrand(_GenerateSumConstant_brand,this,_getDOMTemplate).call(this,t,'',+e)):null}function _addTmpToDOM(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',e=(console.log(),'<template id=\''.concat(t,'\'>\n    <div class="engineSumConstant">\n      <div class="engineSumConstantContainer">\n        <div\n          class="engineSumConstant__notification transitionNotification"\n          data-show="false"\n        >\n        </div>\n        <div\n          class="engineSumConstant__Board"\n          id="boad1"\n          data-board="board_"\n          data-artifact="artifact_"\n        ></div>\n    \n        <div class="engineSumConstant__btnContainer btn-all">\n          <div class="engineSumConstant__Otherbtn"></div>\n          <div>\n            <button\n              class="help-btn button-marg buttonSecundary buttonKey d-none"\n            ></button>\n            <button\n              class="reset button-marg buttonSecundary buttonKey"\n            ></button>\n            <button class="check button-marg buttonPrimary buttonKey"></button>\n          </div>\n        </div>\n      </div>\n    </div>\n    </template>'));return document.body.insertAdjacentHTML('afterend',e),''.concat(t)}function _createArtifact(t,e,n,i,o){var r=n.dataset.board||'board_0',o=t.includes('example')||!t.includes('artifact')?'example'+o:'.engineSumConstant-'+i,a=new SumConstantArtifact(this.allDefinitionArtifacts[t]);return a.setTemplate(e),t.includes('example')&&a.isExample(),e.querySelector('.engineSumConstant__Board').id=''.concat(o,'-board'),e.id=t,n.appendChild(e),a.idToBoard=''.concat(o,'-board'),a.setBoard(this.allDefinitionBoard[r]),a.initArtifact(),a.numberElement=i,!0}_defineProperty(_GenerateSumConstant=GenerateSumConstant,'implement',null);